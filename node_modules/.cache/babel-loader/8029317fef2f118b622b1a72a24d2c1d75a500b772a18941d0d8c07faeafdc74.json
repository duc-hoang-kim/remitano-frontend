{"ast":null,"code":"import _slicedToArray from\"/Users/hoangkimduc/remitano/remitano-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from\"react-router-dom\";import React,{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext({user:null,isAuthenticated:function isAuthenticated(){return false;},logInAs:function logInAs(user){},logOut:function logOut(){}});var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var navigate=useNavigate();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),user=_React$useState2[0],setUser=_React$useState2[1];var logInAs=function logInAs(user){setUser(user);localStorage.setItem('currentUserEmail',user.email);navigate(\"/\");};var logOut=function logOut(){setUser(null);localStorage.removeItem('currentUserEmail');navigate(\"/\");};var isAuthenticated=function isAuthenticated(){return user!=null;};useEffect(function(){var email=localStorage.getItem('currentUserEmail');if(email)setUser({email:email});},[]);var value={user:user,logInAs:logInAs,logOut:logOut,isAuthenticated:isAuthenticated};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};var useAuthenticate=function useAuthenticate(){var context=React.useContext(AuthContext);if(context===undefined){throw new Error(\"must be used within a AuthProvider\");}return context;};export{AuthProvider,useAuthenticate};","map":{"version":3,"names":["useNavigate","React","useEffect","jsx","_jsx","AuthContext","createContext","user","isAuthenticated","logInAs","logOut","AuthProvider","_ref","children","navigate","_React$useState","useState","_React$useState2","_slicedToArray","setUser","localStorage","setItem","email","removeItem","getItem","value","Provider","useAuthenticate","context","useContext","undefined","Error"],"sources":["/Users/hoangkimduc/remitano/remitano-frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["import { Routes, Route, NavLink, useNavigate } from \"react-router-dom\";\nimport React, { ReactNode, useEffect } from \"react\";\nimport { UserType } from \"../features/authentication/types\";\n\ntype AuthProviderPropsType = {\n  children: ReactNode;\n};\n\ntype SessionType = {\n  user: UserType | null;\n  isAuthenticated: () => boolean;\n  logInAs: (user: UserType) => void;\n  logOut: () => void;\n};\n\nconst AuthContext = React.createContext<SessionType>({\n  user: null,\n  isAuthenticated: () => false,\n  logInAs: (user: UserType) => {},\n  logOut: () => {},\n});\n\nconst AuthProvider = ({ children }: AuthProviderPropsType) => {\n  const navigate = useNavigate();\n\n  const [user, setUser] = React.useState<UserType | null>(null);\n\n  const logInAs = (user: UserType) => {\n    setUser(user);\n    localStorage.setItem('currentUserEmail', user.email);\n    navigate(\"/\");\n  };\n\n  const logOut = () => {\n    setUser(null);\n    localStorage.removeItem('currentUserEmail');\n    navigate(\"/\")\n  };\n\n  const isAuthenticated = () => {\n    return user != null;\n  };\n\n  useEffect(() => {\n    const email = localStorage.getItem('currentUserEmail');\n    if (email) setUser({email: email} as UserType)\n  }\n  , []);\n\n  const value = {\n    user,\n    logInAs,\n    logOut,\n    isAuthenticated,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nconst useAuthenticate = () => {\n  const context = React.useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"must be used within a AuthProvider\");\n  }\n  return context;\n};\n\nexport { AuthProvider, useAuthenticate };\n"],"mappings":"mIAAA,OAAiCA,WAAW,KAAQ,kBAAkB,CACtE,MAAO,CAAAC,KAAK,EAAeC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAcpD,GAAM,CAAAC,WAAW,cAAGJ,KAAK,CAACK,aAAa,CAAc,CACnDC,IAAI,CAAE,IAAI,CACVC,eAAe,CAAE,SAAAA,gBAAA,QAAM,MAAK,GAC5BC,OAAO,CAAE,SAAAA,QAACF,IAAc,CAAK,CAAC,CAAC,CAC/BG,MAAM,CAAE,SAAAA,OAAA,CAAM,CAAC,CACjB,CAAC,CAAC,CAEF,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAA4C,IAAtC,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAC9B,GAAM,CAAAC,QAAQ,CAAGd,WAAW,EAAE,CAE9B,IAAAe,eAAA,CAAwBd,KAAK,CAACe,QAAQ,CAAkB,IAAI,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAAtDR,IAAI,CAAAU,gBAAA,IAAEE,OAAO,CAAAF,gBAAA,IAEpB,GAAM,CAAAR,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIF,IAAc,CAAK,CAClCY,OAAO,CAACZ,IAAI,CAAC,CACba,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAEd,IAAI,CAACe,KAAK,CAAC,CACpDR,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,GAAM,CAAAJ,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnBS,OAAO,CAAC,IAAI,CAAC,CACbC,YAAY,CAACG,UAAU,CAAC,kBAAkB,CAAC,CAC3CT,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,GAAM,CAAAN,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC5B,MAAO,CAAAD,IAAI,EAAI,IAAI,CACrB,CAAC,CAEDL,SAAS,CAAC,UAAM,CACd,GAAM,CAAAoB,KAAK,CAAGF,YAAY,CAACI,OAAO,CAAC,kBAAkB,CAAC,CACtD,GAAIF,KAAK,CAAEH,OAAO,CAAC,CAACG,KAAK,CAAEA,KAAK,CAAC,CAAa,CAChD,CAAC,CACC,EAAE,CAAC,CAEL,GAAM,CAAAG,KAAK,CAAG,CACZlB,IAAI,CAAJA,IAAI,CACJE,OAAO,CAAPA,OAAO,CACPC,MAAM,CAANA,MAAM,CACNF,eAAe,CAAfA,eACF,CAAC,CAED,mBAAOJ,IAAA,CAACC,WAAW,CAACqB,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAZ,QAAA,CAAEA,QAAQ,EAAwB,CAC9E,CAAC,CAED,GAAM,CAAAc,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC5B,GAAM,CAAAC,OAAO,CAAG3B,KAAK,CAAC4B,UAAU,CAACxB,WAAW,CAAC,CAC7C,GAAIuB,OAAO,GAAKE,SAAS,CAAE,CACzB,KAAM,IAAI,CAAAC,KAAK,CAAC,oCAAoC,CAAC,CACvD,CACA,MAAO,CAAAH,OAAO,CAChB,CAAC,CAED,OAASjB,YAAY,CAAEgB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}