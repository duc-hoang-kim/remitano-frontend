{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo, useState } from \"react\";\nconst useFetch = _ref => {\n  _s();\n  let {\n    path,\n    method,\n    isIdle = false,\n    onSuccess\n  } = _ref;\n  console.log(isIdle);\n  const [params, setParams] = useState({});\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [total, setTotal] = useState(0);\n  const url = `${process.env.REACT_APP_REMITANO_BACKEND_URL}/${path}?` + (method === \"GET\" ? new URLSearchParams(params) : \"\");\n  const fetch_params = method === \"GET\" ? {\n    method: method\n  } : {\n    method: method,\n    body: JSON.stringify(params)\n  };\n  const useFetchApi = useMemo(() => {\n    if (isIdle) return;\n    fetch(url, fetch_params).then(res => {\n      setTotal(parseInt(res.headers.get(\"Total\") || \"0\"));\n      if (res.ok) onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();\n      return res.json();\n    }).then(response => {\n      setError(response.error);\n      setData(response.data);\n      setIsLoading(false);\n    });\n  }, [url, JSON.stringify(params), isIdle]);\n  return {\n    data,\n    isLoading,\n    error,\n    total\n  };\n};\n_s(useFetch, \"o9/PGBY8ftis1heOQm0KJavTtqM=\");\nexport default useFetch;","map":{"version":3,"names":["useMemo","useState","useFetch","_ref","_s","path","method","isIdle","onSuccess","console","log","params","setParams","data","setData","isLoading","setIsLoading","error","setError","total","setTotal","url","process","env","REACT_APP_REMITANO_BACKEND_URL","URLSearchParams","fetch_params","body","JSON","stringify","useFetchApi","fetch","then","res","parseInt","headers","get","ok","json","response"],"sources":["/Users/hoangkimduc/remitano/remitano_frontend/src/hooks/useFetch.ts"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\n\ndeclare var process: {\n  env: {\n    REACT_APP_REMITANO_BACKEND_URL: string;\n  };\n};\n\ntype useFetchProps = {\n  path: string;\n  method: \"POST\" | \"GET\" | \"PUT\" | \"PATCH\" | \"DELETE\";\n  params: any;\n  onSuccess?: () => any;\n  isIdle?: boolean\n};\n\nconst useFetch = ({ path, method, isIdle = false, onSuccess }: useFetchProps) => {\n  console.log(isIdle)\n  const [params, setParams] = useState({})\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [total, setTotal] = useState(0);\n\n  const url =\n    `${process.env.REACT_APP_REMITANO_BACKEND_URL}/${path}?` +\n    (method === \"GET\" ? new URLSearchParams(params) : \"\");\n\n  const fetch_params =\n    method === \"GET\"\n      ? { method: method }\n      : {\n          method: method,\n          body: JSON.stringify(params),\n        };\n\n  const useFetchApi = useMemo(() => {\n    if (isIdle) return;\n\n    fetch(url, fetch_params)\n      .then((res) => {\n        setTotal(parseInt(res.headers.get(\"Total\") || \"0\"));\n        if (res.ok) onSuccess?.()\n\n        return res.json();\n      })\n      .then((response) => {\n        setError(response.error);\n        setData(response.data);\n        setIsLoading(false);\n      });\n  }, [url, JSON.stringify(params), isIdle]);\n\n  return { data, isLoading, error, total };\n};\nexport default useFetch;\n"],"mappings":";AAAA,SAAoBA,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAgBpD,MAAMC,QAAQ,GAAGC,IAAA,IAAgE;EAAAC,EAAA;EAAA,IAA/D;IAAEC,IAAI;IAAEC,MAAM;IAAEC,MAAM,GAAG,KAAK;IAAEC;EAAyB,CAAC,GAAAL,IAAA;EAC1EM,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;EACnB,MAAM,CAACI,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACc,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC;EAErC,MAAMoB,GAAG,GACN,GAAEC,OAAO,CAACC,GAAG,CAACC,8BAA+B,IAAGnB,IAAK,GAAE,IACvDC,MAAM,KAAK,KAAK,GAAG,IAAImB,eAAe,CAACd,MAAM,CAAC,GAAG,EAAE,CAAC;EAEvD,MAAMe,YAAY,GAChBpB,MAAM,KAAK,KAAK,GACZ;IAAEA,MAAM,EAAEA;EAAO,CAAC,GAClB;IACEA,MAAM,EAAEA,MAAM;IACdqB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAClB,MAAM;EAC7B,CAAC;EAEP,MAAMmB,WAAW,GAAG9B,OAAO,CAAC,MAAM;IAChC,IAAIO,MAAM,EAAE;IAEZwB,KAAK,CAACV,GAAG,EAAEK,YAAY,CAAC,CACrBM,IAAI,CAAEC,GAAG,IAAK;MACbb,QAAQ,CAACc,QAAQ,CAACD,GAAG,CAACE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;MACnD,IAAIH,GAAG,CAACI,EAAE,EAAE7B,SAAS,aAATA,SAAS,uBAATA,SAAS,EAAI;MAEzB,OAAOyB,GAAG,CAACK,IAAI,EAAE;IACnB,CAAC,CAAC,CACDN,IAAI,CAAEO,QAAQ,IAAK;MAClBrB,QAAQ,CAACqB,QAAQ,CAACtB,KAAK,CAAC;MACxBH,OAAO,CAACyB,QAAQ,CAAC1B,IAAI,CAAC;MACtBG,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC;EACN,CAAC,EAAE,CAACK,GAAG,EAAEO,IAAI,CAACC,SAAS,CAAClB,MAAM,CAAC,EAAEJ,MAAM,CAAC,CAAC;EAEzC,OAAO;IAAEM,IAAI;IAAEE,SAAS;IAAEE,KAAK;IAAEE;EAAM,CAAC;AAC1C,CAAC;AAACf,EAAA,CAtCIF,QAAQ;AAuCd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}