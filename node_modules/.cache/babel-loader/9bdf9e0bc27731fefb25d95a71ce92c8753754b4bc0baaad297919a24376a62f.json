{"ast":null,"code":"import _objectSpread from\"/Users/hoangkimduc/remitano/remitano-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/hoangkimduc/remitano/remitano-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useState}from\"react\";var useFetch=function useFetch(_ref){var path=_ref.path,method=_ref.method,onSuccess=_ref.onSuccess;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),total=_useState8[0],setTotal=_useState8[1];var fetchApi=useCallback(function(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var url=\"\".concat(process.env.REACT_APP_REMITANO_BACKEND_URL,\"/\").concat(path,\"?\")+(method===\"GET\"?new URLSearchParams(params):\"\");var common_params={method:method,mode:\"cors\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}};var fetch_params=method===\"GET\"?common_params:_objectSpread(_objectSpread({},common_params),{},{body:JSON.stringify(params)});fetch(url,fetch_params).then(function(res){setTotal(parseInt(res.headers.get(\"Total\")||\"0\"));if(res.ok){res.json().then(function(resBody){onSuccess===null||onSuccess===void 0?void 0:onSuccess(resBody);setError(resBody.error);setData(resBody.data);setIsLoading(false);});}else{res.json().then(function(resBody){setError(resBody.error);setData(resBody.data);setIsLoading(false);});}});},[path]);return{data:data,isLoading:isLoading,error:error,total:total,fetchApi:fetchApi};};export default useFetch;","map":{"version":3,"names":["useCallback","useState","useFetch","_ref","path","method","onSuccess","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","error","setError","_useState7","_useState8","total","setTotal","fetchApi","params","arguments","length","undefined","url","concat","process","env","REACT_APP_REMITANO_BACKEND_URL","URLSearchParams","common_params","mode","credentials","headers","fetch_params","_objectSpread","body","JSON","stringify","fetch","then","res","parseInt","get","ok","json","resBody"],"sources":["/Users/hoangkimduc/remitano/remitano-frontend/src/hooks/useFetch.ts"],"sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\n\ndeclare var process: {\n  env: {\n    REACT_APP_REMITANO_BACKEND_URL: string;\n  };\n};\n\ntype useFetchProps = {\n  path: string;\n  method: \"POST\" | \"GET\" | \"PUT\" | \"PATCH\" | \"DELETE\";\n  onSuccess?: (data: any) => any;\n};\n\nconst useFetch = ({ path, method, onSuccess }: useFetchProps) => {\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [total, setTotal] = useState(0);\n\n  const fetchApi = useCallback(\n    (params: any = {}) => {\n      const url =\n        `${process.env.REACT_APP_REMITANO_BACKEND_URL}/${path}?` +\n        (method === \"GET\" ? new URLSearchParams(params) : \"\");\n\n      const common_params = {\n        method: method,\n        mode: \"cors\" as RequestMode,\n        credentials: \"include\" as RequestCredentials,\n        headers: { \"Content-Type\": \"application/json\" },\n      };\n\n      const fetch_params =\n        method === \"GET\"\n          ? common_params\n          : { ...common_params, body: JSON.stringify(params) };\n\n      fetch(url, fetch_params).then((res) => {\n        setTotal(parseInt(res.headers.get(\"Total\") || \"0\"));\n        if (res.ok) {\n          res.json().then((resBody) => {\n            onSuccess?.(resBody);\n            setError(resBody.error);\n            setData(resBody.data);\n            setIsLoading(false);\n          });\n        } else {\n          res.json().then((resBody) => {\n            setError(resBody.error);\n            setData(resBody.data);\n            setIsLoading(false);\n          });\n        }\n      });\n    },\n    [path]\n  );\n\n  return { data, isLoading, error, total, fetchApi };\n};\nexport default useFetch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}